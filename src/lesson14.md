# 课时十四：平面图

> **考点分布**
>
> | 考点 | 重要程度 | 分值 | 常见题型 |
> |------|---------|------|---------|
> | 1. 平面图的基本概念 | ★★★ | 0 ~ 4 | 选择 |
> | 2. 欧拉公式 | ★★★ | 0 ~ 6 | 选择、解答 |

---

## 1. 平面图的基本概念

### 📖 基本概念

#### 1.1 二部图

设无向图 \(G = \langle V,E \rangle\)，若能将 \(V\) 划分成 \(V_1\) 和 \(V_2\)（即 \(V_1 \cup V_2 = V\)，\(V_1 \cap V_2 = \emptyset\) 且 \(V_1 \neq \emptyset, V_2 \neq \emptyset\)），使得 \(G\) 中的每条边的两个端点都是一个属于 \(V_1\)，另一个属于 \(V_2\)，则称 \(G\) 为**二部图**。

**完全二部图**：若 \(G\) 是二部图，\(V_1\) 中的每个顶点均与 \(V_2\) 中的所有顶点相邻，则称 \(G\) 为**完全二部图**，记为 \(K_{r,s}\)，其中 \(r = |V_1|\)，\(s = |V_2|\)。

#### 1.2 平面图

**平面图**：如果能将无向图 \(G\) 画在平面上使得除顶点处外无边相交，则称 \(G\) 为**可平面图**，简称为**平面图**。

**常见的平面图**：
- \(K_1\)（平凡图），\(K_2, K_3, K_4\) 都是平面图
- \(K_5 - e\)（\(K_5\) 删除任意一条边）也是平面图
- 完全二部图 \(K_{1,n}(n \geq 1)\)，\(K_{2,n}(n \geq 2)\) 都是平面图

**非平面图**：
- \(K_5\) 和 \(K_{3,3}\) 都是非平面图
- 它们都是极小非平面图（删除任意一条边后成为平面图）

#### 1.3 面

给定平面图 \(G\) 的平面嵌入，\(G\) 的边将平面划分成若干个区域，每个区域都称作 \(G\) 的一个**面**，包围每个面的所有边的回路组称作该面的**边界**，边界的长度称作该面的**次数**。

**重要性质**：平面图所有面的次数之和等于边数的两倍。

#### 1.4 库拉托夫斯基定理（Kuratowski's Theorem）

**定理**：一个图是平面图当且仅当它不包含 \(K_5\) 或 \(K_{3,3}\) 的**细分**作为子图。

**细分**：在图的边上插入新的顶点，将一条边分割成多条边。

**应用**：
- 这是平面图的**充要条件**
- 可用于证明图是非平面图
- 但判断细分的存在在实际中可能较复杂

#### 1.5 瓦格纳定理（Wagner's Theorem）

**定理**：一个图是平面图当且仅当它不包含 \(K_5\) 或 \(K_{3,3}\) 作为**子式**。

**子式**：通过删除顶点、删除边、收缩边得到的图。

**与库拉托夫斯基定理的关系**：
- 两者等价，但瓦格纳定理更便于算法化判定
- 子式操作比细分操作更适合计算机实现

#### 1.6 平面性测试算法

**Hopcroft-Tarjan算法**：
- **时间复杂度**：O(n)
- **基本思想**：深度优先搜索，利用回边判断平面性
- **应用**：现代平面性测试的基础算法

**简单判定方法**：
1. **检查必要条件**：若 \(m > 3n - 6\)，则一定非平面
2. **检查子图**：寻找 \(K_5\) 或 \(K_{3,3}\) 的细分或子式
3. **欧拉公式验证**：若已知面数，验证 \(n - m + r = 2\)

### 📖 对偶图（Dual Graph）

**定义**：给定平面图 \(G\)，构造图 \(G^*\)：
- \(G^*\) 的每个顶点对应 \(G\) 的一个面
- \(G^*\) 的每条边对应 \(G\) 中分隔两个面的边

**性质**：
- \(G^{**} = G\)（对偶的对偶是原图）
- \(G\) 是连通的当且仅当 \(G^*\) 是连通的
- \(G\) 的平面嵌入的对偶图是唯一的

**应用**：
- 地图着色问题
- 电路设计
- 网络流分析

### 📖 平面图与着色

**四色定理**：任何平面图都可以用至多4种颜色进行顶点着色。

**五色定理**（可证明）：任何平面图都可以用至多5种颜色进行顶点着色。

#### 五色定理的详细证明

**证明方法**：数学归纳法（对顶点数 n 进行归纳）

**关键引理**：任何平面图中都存在度数 ≤ 5 的顶点

**证明引理**：
- 设平面图有 n 个顶点，m 条边
- 若所有顶点度数 ≥ 6，则 2m = Σd(v) ≥ 6n
- 但简单平面图满足 m ≤ 3n - 6
- 所以 2m ≤ 6n - 12
- 矛盾：6n ≤ 6n - 12 不成立
- 因此必存在度数 ≤ 5 的顶点

**五色定理证明过程**：

**基础情况**：n ≤ 5 时，显然可以用 ≤ 5 种颜色着色

**归纳步骤**：假设对所有顶点数 < n 的平面图，五色定理成立

**对 n 个顶点的平面图 G**：

1. **找到度数 ≤ 5 的顶点 v**
   - 根据引理，这样的顶点一定存在

2. **删除顶点 v，得到图 G'**
   - G' 有 n-1 个顶点
   - 根据归纳假设，G' 可以用 5 种颜色着色

3. **重新加入 v 并着色**

   **情况 1**：v 的邻居 ≤ 4 个
   - 邻居最多用了 4 种颜色
   - v 可以用第 5 种颜色

   **情况 2**：v 有 5 个邻居
   - 设邻居按顺时针顺序为 v₁, v₂, v₃, v₄, v₅
   - 它们分别用了某些颜色（最多 5 种）

   **子情况 2a**：5 个邻居用了 ≤ 4 种颜色
   - v 可以用剩余的颜色

   **子情况 2b**：5 个邻居用了 5 种不同颜色
   - 考虑 v₁, v₂, v₃, v₄ 构成的子图
   - 如果 v₁ 和 v₃ 在 G' 中不连通：
     - 交换 v₁, v₃ 所在连通分量的颜色
     - 这样 v₁ 和 v₃ 颜色相同，v 可用第 5 种颜色
   - 如果 v₁ 和 v₃ 在 G' 中连通：
     - 考虑 v₂, v₄，如果它们不连通：
       - 交换 v₂, v₄ 所在连通分量的颜色
       - v₂ 和 v₄ 颜色相同，v 可用第 5 种颜色
     - 如果 v₂ 和 v₄ 也连通：
       - 这会形成包含 v 的环，与平面性矛盾
       - 因为 v₁-v₂-v₃-v₄-v₁ 会包围 v，但 v 在环内，无法连接到环外

**结论**：无论如何都能为 v 找到合适的颜色，五色定理得证。

#### 四色定理说明

**重要性**：
- 这是图论中最著名的定理之一
- 1976年由 Appel 和 Haken 首次用计算机证明
- 证明使用了大量计算机计算（约 1200 小时）
- 至今仍有争议，因为无法人工验证所有情况

**实际应用**：
- 地图着色问题
- 无线电频率分配
- 电路板布线

### 📝 着色定理详细例题

#### 例题1：五色定理的完整证明示例

**题目**：使用五色定理证明方法，为以下平面图着色：

```
      v1
     /  \
    /    \
   v2----v3
   | \  / |
   |  \/  |
   v4----v5
```

**详细解答**：

**步骤1：验证引理**
- 图中有5个顶点，每个顶点度数：
  - d(v1) = 2
  - d(v2) = 4
  - d(v3) = 4
  - d(v4) = 3
  - d(v5) = 3
- 所有顶点度数 ≤ 5，满足引理条件 ✓

**步骤2：归纳证明**
- 基础：n=5，直接用5种颜色着色
- 归纳：假设对n-1个顶点的图成立

**步骤3：具体着色过程**
1. 删除度数最小的顶点v4（度数为3）
2. 剩余图：v1, v2, v3, v5（4个顶点）
3. 用5种颜色为剩余图着色：
   - v1: 颜色1
   - v2: 颜色2
   - v3: 颜色3
   - v5: 颜色4
4. 重新加入v4，其邻居为v2, v3, v5
   - v2用颜色2，v3用颜色3，v5用颜色4
   - 剩余颜色：1, 5
   - v4可以用颜色1或5

**答案**：一种可行的5着色方案：v1=1, v2=2, v3=3, v4=1, v5=4

---

#### 例题2：K₅的着色分析

**题目**：分析完全图K₅的着色性质。

**详细解答**：

**K₅的结构**：
```
      v1
     / | \
    /  |  \
   v2--v3--v4
    \  |  /
     \ | /
      v5
```
（实际K₅中每对顶点都有边）

**度数分析**：
- 每个顶点度数 = 4
- 总边数 = 10
- 顶点数 = 5

**着色分析**：
1. **K₅不是平面图**（根据Kuratowski定理）
2. **着色数**：χ(K₅) = 5
   - 因为K₅中任意两个顶点相邻，需要5种不同颜色
3. **与五色定理的关系**：
   - 五色定理只适用于平面图
   - K₅是非平面图，所以不受五色定理限制

**结论**：K₅需要5种颜色，证明了5色的必要性。

---

#### 例题3：K₃,₃的着色分析

**题目**：分析完全二部图K₃,₃的着色性质。

**详细解答**：

**K₃,₃的结构**：
```
   a1   a2   a3
   | \  |  / |
   |  \ | /  |
   |   \|/   |
   b1---b2---b3
```
（实际K₃,₃中每个a都连接所有b）

**度数分析**：
- a组顶点度数 = 3
- b组顶点度数 = 3
- 总边数 = 9
- 顶点数 = 6

**着色分析**：
1. **K₃,₃不是平面图**（根据Kuratowski定理）
2. **着色数**：χ(K₃,₃) = 2
   - 这是二部图，可以用2种颜色着色
   - a组全用颜色1，b组全用颜色2
3. **与平面图着色的区别**：
   - 平面图着色数 ≤ 4
   - K₃,₃着色数 = 2，但它是非平面图

**结论**：K₃,₃可以用2种颜色着色，但它是非平面图。

---

#### 例题4：平面图着色实践

**题目**：为以下平面图用最少的颜色着色：

```
      v1
     /  \
    v2--v3
    | \  |
    |  \ |
    v4--v5
```

**详细解答**：

**步骤1：判断平面性**
- 图中无K₅或K₃,₃子图
- 可以画在平面上无交叉边
- 是平面图 ✓

**步骤2：计算着色数**
- 方法1：检查是否为二部图
  - v1连接v2, v3
  - v2连接v1, v3, v4, v5
  - v3连接v1, v2, v5
  - v4连接v2, v5
  - v5连接v2, v3, v4
  - 存在奇环：v2-v3-v5-v2（3个顶点）
  - 不是二部图，着色数 ≥ 3

- 方法2：检查最大团
  - 三角形：v2-v3-v5
  - 所以至少需要3种颜色

**步骤3：实际着色**
- 尝试3种颜色：
  - v1: 颜色1
  - v2: 颜色2
  - v3: 颜色3
  - v4: 颜色3（只与v2相邻）
  - v5: 颜色1（与v2=2, v3=3相邻）

**验证**：
- v1(1)与v2(2), v3(3) ✓
- v2(2)与v1(1), v3(3), v4(3), v5(1) ✓
- v3(3)与v1(1), v2(2), v5(1) ✓
- v4(3)与v2(2), v5(1) ✓
- v5(1)与v2(2), v3(3), v4(3) ✓

**答案**：最少需要3种颜色，着色方案：v1=1, v2=2, v3=3, v4=3, v5=1

---

#### 例题5：面着色问题

**题目**：给定平面图G，证明其对偶图G*的顶点着色等价于G的面着色。

**详细解答**：

**概念理解**：
- G的面着色：为G的每个面分配颜色
- G*的顶点着色：为G*的每个顶点分配颜色
- G*的顶点 ↔ G的面
- G*的边 ↔ G中分隔两个面的边

**证明**：
1. **建立对应关系**：
   - G的面F₁对应G*的顶点v₁
   - G的面F₂对应G*的顶点v₂
   - 如果F₁和F₂相邻（有公共边），则v₁和v₂在G*中有边连接

2. **着色等价性**：
   - G的面着色要求：相邻面不同色
   - G*的顶点着色要求：相邻顶点不同色
   - 两者条件完全一致

3. **四色定理的等价形式**：
   - 平面图G的顶点着色数 ≤ 4
   - ⇔ 平面图G的面着色数 ≤ 4
   - ⇔ 平面图G的对偶图G*的顶点着色数 ≤ 4

**应用**：
- 地图着色问题可以转化为平面图的面着色
- 也可以转化为对偶图的顶点着色
- 四色定理保证了最多4种颜色足够

---

#### 例题6：实际地图着色

**题目**：以下地图需要几种颜色？

```
   +-----+-----+
   |  A  |  B  |
   +-----+-----+
   |  C  |  D  |
   +-----+-----+
   |  E  |  F  |
   +-----+-----+
```

其中：A与B、C相邻；B与A、D相邻；C与A、D、E相邻；D与B、C、F相邻；E与C、F相邻；F与D、E相邻。

**详细解答**：

**步骤1：转化为平面图**
- 顶点：A, B, C, D, E, F
- 边：AB, AC, BD, CD, CE, DF, EF

**步骤2：绘制图**
```
   A---B
   |   |
   C---D
   |   |
   E---F
```

**步骤3：分析着色数**
- 检查是否为二部图：
  - A-B-D-C-A形成4-环（偶环）
  - C-D-F-E-C形成4-环（偶环）
  - 可能是二部图

- 尝试二部划分：
  - 集合1：A, D, E
  - 集合2：B, C, F
  - 验证：
    - A(1)连接B(2), C(2) ✓
    - B(2)连接A(1), D(1) ✓
    - C(2)连接A(1), D(1), E(1) ✓
    - D(1)连接B(2), C(2), F(2) ✓
    - E(1)连接C(2), F(2) ✓
    - F(2)连接D(1), E(1) ✓

**结论**：这是二部图，可以用2种颜色着色。

**着色方案**：
- 颜色1：A, D, E
- 颜色2：B, C, F

**答案**：最少需要2种颜色。

---

#### 例题7：复杂平面图着色

**题目**：证明任何平面图G，若其每个面都是三角形，则G是3-可着色的当且仅当G是欧拉图。

**详细解答**：

**已知条件**：
- G是平面图
- 每个面都是三角形（3-边形）
- 需要证明：χ(G) ≤ 3 ⇔ G是欧拉图

**证明**：

**⇒ 方向**：若χ(G) ≤ 3，则G是欧拉图

1. 设G用3种颜色着色，颜色为1, 2, 3
2. 考虑任意顶点v：
   - v的邻居最多使用2种颜色（因为v占用了1种）
   - 所以d(v) ≤ 2 × 2 = 4
3. 但每个面是三角形，所以每个顶点至少度数为3
4. 因此每个顶点度数为3或4
5. 若存在度数为3的顶点，则总度数和为奇数，与握手定理矛盾
6. 所以所有顶点度数为4，是欧拉图

**⇐ 方向**：若G是欧拉图，则χ(G) ≤ 3

1. G是欧拉图 ⇒ 所有顶点度数为偶数
2. 每个面是三角形 ⇒ 每个顶点度数 ≥ 3
3. 所以每个顶点度数 ≥ 4且为偶数
4. 使用3种颜色着色：
   - 由于每个面是三角形，相邻顶点必须不同色
   - 这是平面三角剖分图，可以用3种颜色着色

**结论**：得证。

---

#### 例题8：着色数的边界问题

**题目**：构造一个平面图，其着色数恰好为4。

**详细解答**：

**构造方法**：
考虑图G = K₄（完全图4个顶点）

**K₄的结构**：
```
   v1
  / | \
 v2-v3-v4
```

**K₄的性质**：
- 4个顶点，每对顶点都有边
- 边数 = 6
- 每个顶点度数 = 3
- 是平面图（可以画成四面体的投影）

**着色分析**：
- 任意两个顶点相邻，需要4种不同颜色
- χ(K₄) = 4

**验证平面性**：
- K₄可以画成：
```
   v1
   |\
   | \
   v2-v3
   \  |
    \ |
     v4
```
- 无边交叉，是平面图 ✓

**结论**：K₄是平面图且着色数为4，证明了四色定理的紧性。

---

#### 例题9：五色定理的反例构造

**题目**：为什么五色定理不能改进为四色定理的简单证明？

**详细解答**：

**关键点**：
五色定理证明中的关键步骤：
1. 找到度数≤5的顶点v
2. 删除v，对剩余图用归纳法
3. 重新加入v，需要为v着色

**问题所在**：
当v有5个邻居，且5个邻居用了5种不同颜色时：
- 需要通过交换颜色来释放一种颜色给v
- 这依赖于v₁和v₃（或v₂和v₄）在G'中不连通
- 如果它们连通，则需要更复杂的处理

**为什么不能改进到4**：
1. **K₄的存在**：K₄需要4种颜色，证明4是必要的
2. **证明复杂性**：四色定理的证明需要处理大量特殊情况
3. **Kuratowski定理**：K₅和K₃,₃是非平面图，但K₄是平面图且需要4色

**实际意义**：
- 五色定理有简洁的构造性证明
- 四色定理虽然成立，但证明极其复杂
- 这是图论中"简单证明 vs 完整证明"的经典案例

---

#### 例题10：着色算法实例

**题目**：使用贪心着色算法为以下平面图着色：

```
   v1---v2
   | \  |
   |  \ |
   v3--v4
```

**详细解答**：

**贪心着色算法**：
1. 按某种顺序处理顶点
2. 为每个顶点分配最小的可用颜色（不与已着色邻居冲突）

**步骤1：按度数排序**（从大到小）
- v1: 度数3
- v2: 度数2
- v4: 度数2
- v3: 度数2

**步骤2：着色过程**
- v1: 颜色1（第一个顶点）
- v2: 颜色2（与v1相邻）
- v4: 颜色3（与v1, v2相邻）
- v3: 颜色2（只与v1, v4相邻，v1=1, v4=3，可用2）

**验证**：
- v1(1)与v2(2), v3(2), v4(3) ✓
- v2(2)与v1(1), v4(3) ✓
- v3(2)与v1(1), v4(3) ✓
- v4(3)与v1(1), v2(2), v3(2) ✓

**结果**：使用3种颜色

**最优性分析**：
- 图中存在三角形v1-v3-v4-v1
- 所以至少需要3种颜色
- 算法得到3种颜色，是最优的

---

#### 例题11：关键引理的详细证明

**题目**：详细证明"任何平面图中都存在度数 ≤ 5 的顶点"这一引理。

**详细解答**：

**证明思路**：反证法 + 握手定理 + 平面图性质

**详细步骤**：

**步骤1：假设反面**
- 假设存在平面图G，其中所有顶点度数 ≥ 6
- 设G有n个顶点，m条边

**步骤2：应用握手定理**
- 所有顶点度数之和 = 2m
- 因为每个顶点度数 ≥ 6，所以：
  \[
  2m = \sum_{v \in V} d(v) \geq 6n
  \]
- 即：\(m \geq 3n\)

**步骤3：应用平面图性质**
- 对于简单平面图（n ≥ 3），有：\(m \leq 3n - 6\)
- 这个不等式的证明：
  - 设平面图有r个面
  - 欧拉公式：\(n - m + r = 2\)
  - 每个面至少由3条边围成，且每条边最多属于2个面
  - 所以：\(3r \leq 2m\)，即 \(r \leq \frac{2m}{3}\)
  - 代入欧拉公式：
    \[
    n - m + \frac{2m}{3} \geq 2
    \]
    \[
    n - \frac{m}{3} \geq 2
    \]
    \[
    3n - m \geq 6
    \]
    \[
    m \leq 3n - 6
    \]

**步骤4：得出矛盾**
- 从步骤2：\(m \geq 3n\)
- 从步骤3：\(m \leq 3n - 6\)
- 矛盾：\(3n \leq 3n - 6\) 不成立

**步骤5：结论**
- 假设不成立
- 因此，任何平面图中必存在度数 ≤ 5 的顶点

**引理的重要性**：
- 这是五色定理证明的基础
- 保证了归纳法的可行性
- 说明平面图的局部结构受限

---

#### 例题12：四色定理的计算机证明

**题目**：了解四色定理的计算机证明方法。

**详细解答**：

**历史背景**：
- 1852年：Guthrie提出四色猜想
- 1879年：Kempe给出"证明"（后被发现有误）
- 1890年：Heawood证明五色定理
- 1976年：Appel和Haken首次用计算机证明

**证明方法**：

**1. 不可免集（Unavoidable Set）**
- 定义：任何平面图都必须包含这些构型中的至少一个
- 例子：所有平面图都包含度数 ≤ 5 的顶点

**2. 可约构型（Reducible Configuration）**
- 定义：如果一个构型出现，可以通过归约证明四色定理
- 方法：如果包含该构型的图需要5色，则原图也需要5色

**3. 计算机验证**
- Appel和Haken找到约2000个不可免构型
- 验证每个构型都是可约的
- 计算机运行约1200小时

**证明结构**：
```
任何平面图
   ↓
包含不可免集中的构型
   ↓
每个构型都是可约的
   ↓
因此可以用4种颜色着色
```

**争议与改进**：
- 1996年：Robertson等人给出简化证明（仍用计算机）
- 2005年：Gonthier给出形式化验证（使用Coq证明助手）
- 至今仍无法完全人工验证

**意义**：
- 展示了计算机在数学证明中的作用
- 引发了对"什么是证明"的哲学讨论
- 推动了形式化验证技术的发展

---

#### 例题13：平面图着色的算法复杂度

**题目**：分析平面图着色问题的计算复杂度。

**详细解答**：

**问题定义**：
- 输入：平面图G和整数k
- 问题：G是否k-可着色？

**复杂度分析**：

**1. 一般图着色**
- 问题：判断图是否k-可着色
- 复杂度：对k ≥ 3是NP-完全问题
- 证明：可以通过3-SAT归约

**2. 平面图着色**
- **k = 2**：多项式时间可解（二部图判定）
  - 使用BFS或DFS检查奇环
  - 时间复杂度：O(n + m)

- **k = 3**：多项式时间可解
  - 1976年：Kubicka证明可以在多项式时间内判定
  - 但实际算法复杂度较高

- **k = 4**：NP-完全问题
  - 即使限制到平面图，仍然是NP-完全
  - 但四色定理保证了平面图总是4-可着色
  - 所以判定问题总是返回"是"

**3. 实际算法**

**贪心算法**：
```
按任意顺序处理顶点
对每个顶点v：
   找到最小的不与v邻居冲突的颜色c
   给v着色为c
```
- 时间复杂度：O(n + m)
- 最坏情况可能需要Δ+1种颜色（Δ为最大度数）
- 对平面图，保证最多需要4种颜色

**回溯算法**：
```
尝试为每个顶点分配颜色
如果冲突则回溯
```
- 时间复杂度：最坏O(k^n)
- 可以通过剪枝优化

**启发式算法**：
- DSATUR（最大饱和度优先）
- Welsh-Powell算法
- 这些算法在实践中表现良好

---

#### 例题14：平面图着色的应用实例

**题目**：无线电频率分配问题。

**详细解答**：

**问题背景**：
- 需要为多个发射站分配频率
- 相邻的发射站不能使用相同频率（会干扰）
- 目标：使用最少的频率

**建模**：
- 每个发射站 → 图的顶点
- 干扰关系 → 图的边
- 频率 → 着色颜色
- 问题转化为：图的着色问题

**实际考虑**：
1. **地理限制**：
   - 发射站分布在平面上
   - 干扰范围有限
   - 通常可以建模为平面图或近似平面图

2. **频率约束**：
   - 可用频率有限
   - 不同频率干扰程度不同
   - 需要最小化总干扰

3. **算法选择**：
   - 大规模问题：贪心算法
   - 中等规模：DSATUR
   - 精确解：回溯+剪枝

**实例**：
假设5个发射站，干扰关系如下：
```
   A---B
   | \ |
   C---D
   |   |
   E---F
```

**着色结果**：
- 颜色1：A, E
- 颜色2：B, C
- 颜色3：D, F

需要3种频率。

---

#### 例题15：平面图着色的扩展问题

**题目**：什么是列表着色（List Coloring）？

**详细解答**：

**定义**：
- 给定平面图G
- 每个顶点v有一个颜色列表L(v)
- 问：是否存在着色，使得每个顶点v的颜色 ∈ L(v)？

**与普通着色的关系**：
- 如果每个L(v) = {1, 2, ..., k}，则退化为k-着色
- 列表着色更一般

**平面图的列表着色**：

**Grötzsch定理**：
- 任何无三角形的平面图都是3-可着色的
- 但存在无三角形的平面图不是3-列表可着色的

**列表着色数**：
- 定义：最小的k，使得对任意大小为k的列表分配，都存在合法着色
- 记为：χ_l(G)

**平面图的列表着色性质**：
- 1993年：Voigt证明存在平面图，χ(G) = 4但χ_l(G) > 4
- 2001年：Mirsky证明存在平面图，χ_l(G) = 5
- 这说明列表着色比普通着色更难

**实际意义**：
- 频率分配中，不同站点可能有不同的可用频率集合
- 需要列表着色来处理这种约束

---

## 2. 欧拉公式

### 📖 欧拉公式

**欧拉公式**：连通平面图 \(G\) 的顶点数、边数和面数分别为 \(n, m\) 和 \(r\)，则有：

\[
n - m + r = 2
\]

### 💡 简单平面图的必要条件

设 \(G\) 是 \(n(n \geq 3)\) 阶 \(m\) 条边的简单平面图，则：

\[
m \leq 3n - 6
\]

**重要说明**：
- 一个简单连通图，若不满足 \(m \leq 3n - 6\)，则一定是非平面图
- 但满足该不等式的简单连通图**未必是平面图**（只是必要条件，不是充分条件）

### 📝 例题

**例题1**：设 \(G\) 是连通平面图，有5个顶点，6个面，则 \(G\) 的边数是（ ）。

A. 5条

B. 6条

C. 9条

D. 11条

<details>
<summary><strong>点击查看答案</strong></summary>

**解答**：

**使用欧拉公式**：\(n - m + r = 2\)

已知：\(n = 5\)，\(r = 6\)

\[
5 - m + 6 = 2 \Rightarrow m = 9
\]

**答案**：C（但选项中没有9，检查题目）

重新计算：\(5 - m + 6 = 2 \Rightarrow m = 9\)

但选项A是5，可能题目有误。根据欧拉公式，答案应该是9。

如果按照选项，可能是：\(5 - 5 + 6 = 6 \neq 2\)，不对。

**正确答案**：根据欧拉公式，\(m = n + r - 2 = 5 + 6 - 2 = 9\)

但选项中没有9，可能是题目数据有误。按公式计算应该是9。

</details>

---

**例题2**：图 \(G\) 是一个简单的连通平面图，顶点数为8，其无限面的次数为5，其余面都为三角形（次数为3），计算平面图的边数和面数。

<details>
<summary><strong>点击查看答案</strong></summary>

**解答**：

**设平面图 \(G\) 的边数为 \(m\)，面数为 \(r\)**

**使用欧拉公式**：
\[
n - m + r = 2 \Rightarrow 8 - m + r = 2
\]

**使用面的次数性质**：
所有面的次数之和 = \(2m\)

\[
5 + 3(r - 1) = 2m
\]

**联立求解**：
\[
\begin{cases}
8 - m + r = 2 \\
5 + 3(r - 1) = 2m
\end{cases}
\]

\[
\begin{cases}
m = r + 6 \\
5 + 3r - 3 = 2m \\
2 + 3r = 2(r + 6) \\
2 + 3r = 2r + 12 \\
r = 10 \\
m = 16
\end{cases}
\]

**答案**：边数为16，面数为10

</details>

---

**例题3**：设图 \(G\) 有 \(V\) 个结点 \(e\) 条边，当 \(V > 3\)，若不满足 \(e \leq 3V - 6\)，它一定不是平面图。（）

<details>
<summary><strong>点击查看答案</strong></summary>

**解答**：

**正确** ✅

**说明**：
- \(m \leq 3n - 6\) 是简单平面图的**必要条件**
- 若不满足这个条件，则图一定不是平面图
- 但满足这个条件不一定就是平面图

**答案**：正确

</details>

---

## 3. 练习题

### 练习1

5个结点的简单平面图的边数最多是（ ）。

A. 7

B. 8

C. 9

D. 10

<details>
<summary><strong>点击查看答案</strong></summary>

**解答**：

**使用简单平面图的必要条件**：\(m \leq 3n - 6\)

\(n = 5\)：
\[
m \leq 3 \times 5 - 6 = 15 - 6 = 9
\]

**答案**：C

</details>

---

### 练习2

二部图 \(K_{2,3}\) 是（ ）。

A. 欧拉图

B. 哈密顿图

C. 非平面图

D. 平面图

<details>
<summary><strong>点击查看答案</strong></summary>

**解答**：

**\(K_{2,3}\) 的性质**：

**平面性**：
- \(K_{2,n}(n \geq 2)\) 都是平面图
- 所以 \(K_{2,3}\) 是平面图 ✅

**欧拉性**：
- 需要检查度数（无向图需要所有顶点度数为偶数）
- \(K_{2,3}\) 中，2个顶点的度数为3，3个顶点的度数为2
- 有奇度顶点，所以不是欧拉图 ❌

**哈密顿性**：
- 需要检查是否存在哈密顿回路
- \(K_{2,3}\) 不一定有哈密顿回路 ❌

**答案**：D

</details>

---

### 练习3

若简单连通图 \(G\) 有4个结点，3个面，则 \(G\) 有（ ）条边。

A. 3

B. 4

C. 5

D. 6

<details>
<summary><strong>点击查看答案</strong></summary>

**解答**：

**使用欧拉公式**：\(n - m + r = 2\)

已知：\(n = 4\)，\(r = 3\)

\[
4 - m + 3 = 2 \Rightarrow m = 5
\]

**答案**：C

</details>

---

### 练习4

设 \(G\) 是连通平面图，有 \(v\) 个顶点，\(e\) 条边，\(r\) 个面，则 \(v - e + r =\underline{\quad}\)。

<details>
<summary><strong>点击查看答案</strong></summary>

**解答**：

**欧拉公式**：对于连通平面图，\(n - m + r = 2\)

**答案**：2

</details>

---

### 练习5

设简单平面图 \(G\) 有 \(n\) 个顶点，\(m\) 条边，且 \(n \geq 3\)，则 \(m \leq\underline{\quad}\)。

<details>
<summary><strong>点击查看答案</strong></summary>

**解答**：

**简单平面图的必要条件**：\(m \leq 3n - 6\)

**答案**：\(3n - 6\)

</details>

---

## 📌 总结

### 关键要点

1. **平面图**：
   - 定义：能画在平面上使得除顶点处外无边相交
   - 常见的平面图：\(K_1, K_2, K_3, K_4, K_{1,n}, K_{2,n}\)
   - 非平面图：\(K_5, K_{3,3}\)

2. **欧拉公式**：
   - 连通平面图：\(n - m + r = 2\)
   - 其中 \(n\) 是顶点数，\(m\) 是边数，\(r\) 是面数

3. **简单平面图的必要条件**：
   - \(m \leq 3n - 6\)（\(n \geq 3\)）
   - 不满足一定不是平面图，满足不一定就是平面图

4. **面的次数**：
   - 所有面的次数之和 = \(2m\)

5. **着色定理**：
   - 五色定理：任何平面图都可以用至多5种颜色着色
   - 四色定理：任何平面图都可以用至多4种颜色着色
   - 关键引理：平面图中存在度数 ≤ 5 的顶点

### 记忆技巧

- **欧拉公式**：\(n - m + r = 2\)（顶点 - 边 + 面 = 2）
- **简单平面图条件**：\(m \leq 3n - 6\)
- **非平面图**：\(K_5\) 和 \(K_{3,3}\)
- **面的次数**：总和等于边数的2倍
- **五色定理证明**：归纳法 + 度数引理 + 颜色交换
- **四色定理**：计算机证明，1976年

### 常见题型

1. **平面性判定**：检查是否包含 \(K_5\) 或 \(K_{3,3}\)
2. **欧拉公式计算**：已知两个求第三个
3. **边数上限**：使用 \(m \leq 3n - 6\)
4. **着色问题**：判断着色数，给出着色方案
5. **证明题**：五色定理证明，引理证明

### 易错点

1. 混淆平面图和非平面图的判定条件
2. 忘记欧拉公式只适用于连通图
3. \(m \leq 3n - 6\) 是必要条件，不是充分条件
4. 五色定理和四色定理的证明方法不同
5. 着色时忘记检查奇环和团结构

---
